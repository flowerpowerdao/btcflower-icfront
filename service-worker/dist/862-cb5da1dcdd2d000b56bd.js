(()=>{"use strict";var e,t,r={862:(e,t,r)=>{var n=r(437),o=r(543);async function a(e,t,r,o,a,i,c=!1){const f=new n.KB({certificate:new Uint8Array(o)},i);if(c&&await i.fetchRootKey(),!await f.verify())return!1;const d=n.Kt.decode(new Uint8Array(a)),u=await(0,n.XO)(d),p=f.lookup(["canister",e.toUint8Array(),"certified_data"]);if(!p)throw new Error("Could not find certified data for this canister in the certificate.");if(!s(p,u))return console.error("Witness != Tree passed in ic-certification"),!1;const h=await crypto.subtle.digest("SHA-256",r);let l=(0,n.OZ)(["http_assets",t],d);return l||(l=(0,n.OZ)(["http_assets","/index.html"],d)),l?!!l&&s(h,l):(console.error(`Invalid Tree in the header. Does not contain path ${JSON.stringify(t)}`),!1)}function s(e,t){if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let e=0;e<r.length;e++)if(r[e]!=n[e])return!1;return!0}var i=r(704),c=r(885);const f=({IDL:e})=>{const t=e.Tuple(e.Text,e.Text),r=e.Record({method:e.Text,url:e.Text,headers:e.Vec(t),body:e.Vec(e.Nat8)}),n=e.Record({status_code:e.Nat16,headers:e.Vec(t),body:e.Vec(e.Nat8)});return e.Service({http_request:e.Func([r],[n],["query"])})};self.addEventListener("install",(()=>{self.skipWaiting()})),self.addEventListener("fetch",(e=>{try{const t=async function(e){const t=new URL(e.url);if(!t.hostname.endsWith("icfront-letmejustputthishere.vercel.app"))return await fetch(e);const r=o.R.fromText("pk6rk-6aaaa-aaaae-qaazq-cai");try{const o=new URL("https://ic0.app"),s=new n.i7({host:o.toString()}),d=n.vt.createActor(f,{agent:s,canisterId:r}),u=[];e.headers.forEach(((e,t)=>u.push([t,e]))),e.headers.has("Accept-Encoding")||u.push(["Accept-Encoding","gzip, deflate, identity"]);const p={method:e.method,url:t.pathname+t.search,headers:u,body:[...new Uint8Array(await e.arrayBuffer())]},h=await d.http_request(p),l=new Headers;let w,y,g="";for(const[e,t]of h.headers){switch(e.trim().toLowerCase()){case"ic-certificate":{const e=t.split(/,/);for(const t of e){const[e,r,n]=[...t.match(/^(.*)=:(.*):$/)].map((e=>e.trim())),o=i.J(n);"certificate"===r?w=o:"tree"===r&&(y=o)}}continue;case"content-encoding":g=t.trim()}l.append(e,t)}const b=new Uint8Array(h.body),v=function(e,t){switch(t){case"identity":case"":return e;case"gzip":return c.ec(e);case"deflate":return c.rr(e);default:throw new Error(`Unsupported encoding: "${t}"`)}}(b,g);let m=!1;return w&&y&&(m=await a(r,t.pathname,b.buffer,w,y,s,!1),m||(m=await a(r,t.pathname,v.buffer,w,y,s,!1))),m?new Response(v.buffer,{status:h.status_code,headers:l}):(console.error("BODY DOES NOT PASS VERIFICATION"),new Response("Body does not pass verification",{status:500}))}catch(e){return console.error("Failed to fetch response:",e),new Response(`Failed to fetch response: ${e.toString()}`,{status:500})}return console.error(`URL ${JSON.stringify(t.toString())} did not resolve to a canister ID.`),new Response("Could not find the canister ID.",{status:404})}(e.request);e.respondWith(t)}catch(t){let r=String(t);return console.error(r),e.respondWith(new Response(r,{status:501}))}}))}},n={};function o(e){var t=n[e];if(void 0!==t)return t.exports;var a=n[e]={exports:{}};return r[e].call(a.exports,a,a.exports,o),a.exports}o.m=r,o.x=()=>{var e=o.O(void 0,[450],(()=>o(862)));return o.O(e)},o.amdO={},e=[],o.O=(t,r,n,a)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){for(var[r,n,a]=e[d],i=!0,c=0;c<r.length;c++)(!1&a||s>=a)&&Object.keys(o.O).every((e=>o.O[e](r[c])))?r.splice(c--,1):(i=!1,a<s&&(s=a));if(i){e.splice(d--,1);var f=n();void 0!==f&&(t=f)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,n,a]},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>e+"-e9fcceaf1ec6c07574b1.js",o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.p="/",(()=>{var e={862:1};o.f.i=(t,r)=>{e[t]||importScripts(o.p+o.u(t))};var t=self.webpackChunkic_agent_sw_cert_app=self.webpackChunkic_agent_sw_cert_app||[],r=t.push.bind(t);t.push=t=>{var[n,a,s]=t;for(var i in a)o.o(a,i)&&(o.m[i]=a[i]);for(s&&s(o);n.length;)e[n.pop()]=1;r(t)}})(),t=o.x,o.x=()=>o.e(450).then(t),o.x()})();
//# sourceMappingURL=862-cb5da1dcdd2d000b56bd.js.map